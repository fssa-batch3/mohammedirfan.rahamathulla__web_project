<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>

    <body>
        <form class="form">

            <label>Enter UUID</label>
            <input type="text" id="uuid">
            <button type="submit" id="find_Movie_detail">Find movie</button>

            <label>Movie_name</label>
            <input type="text" id="Movie_name">

            <label>Genre</label>
            <input type="text" id="Genre">

            <label>Language</label>
            <input type="text" id="Language">

            <label>Dates</label>
            <input type="date" id="Dates">

            <label>Actors</label>
            <input type="text" id="Actors">

            <label>Director</label>
            <input type="text" id="Director">

            <label>Music_Director</label>
            <input type="text" id="MusicDirector">

            <label>Synopsis</label>
            <input type="text" id="Synopsis">

            <label>Image url</label>
            <input type="url" id="image_url">

            <label for="">Theatre_name</label>
            <input type="text" id="theatre_name">
    
            <label for="">timing</label>
            <input type="time" id="morning_timing">
    
            <label for="">timing</label>
            <input type="time" id="afternoon_timing">
    
            <label for="">timing</label>
            <input type="time" id="evening_timing">
    
            <label for="">timing</label>
            <input type="time" id="night_timing">

            <label>link file</label>
            <input type="text" id="link_file">

            <button type="submit" id="edit">Edit details</button>
            <button type="submit" id="delete">Delete Details</button>

        </form>

        <script>
                //get value from local storage
                const form = document.querySelector(".form");
                const unique_id = document.getElementById("uuid");

                // let Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));

                const findMovieDetails = document.getElementById("find_Movie_detail");
                const movie_name = document.getElementById("Movie_name");
                const genre = document.getElementById("Genre");
                const date = document.getElementById("Dates");
                const language = document.getElementById("Language");
                const actors = document.getElementById("Actors");
                const director = document.getElementById("Director");
                const music_director = document.getElementById("MusicDirector");
                const synopsis = document.getElementById("Synopsis");
                // const timing = document.getElementById("Timing")
                const image_url = document.getElementById("image_url");
                const theatreName = document.getElementById("theatre_name");
                const morningTiming = document.getElementById("morning_timing");
                const afternoonTiming = document.getElementById("afternoon_timing");
                const eveningTiming = document.getElementById("evening_timing");
                const nightTiming = document.getElementById("night_timing");

                findMovieDetails.addEventListener("click", (event) => {
                  event.preventDefault();
                  const uniqueId = unique_id.value;
                  const Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));
                  console.log(Movie_detail);
                  const movie = Movie_detail.find((details) => details.uuid === uniqueId);
                  console.log(movie);

                  if (movie) {
                    movie_name.value = movie.movie_name;
                    genre.value = movie.genre;
                    date.value = movie.dates;
                    language.value = movie.language;
                    actors.value = movie.actors;
                    director.value = movie.director;
                    music_director.value = movie.music_Director;
                    synopsis.value = movie.synopsis;
                    // timing.value = movie.timing;
                    image_url.value = movie.image_url;
                    theatreName.value = movie.theatreName;
                    // console.log(movie.morningTiming)
                    morningTiming.value = movie.morningTiming;
                    afternoonTiming.value = movie.afternoonTiming;
                    eveningTiming.value = movie.eveningTiming;
                    nightTiming.value = movie.nightTiming;
                
                    link_file.value = movie.link_file;

                    document.getElementById("edit").addEventListener("click", (event) => {
                      event.preventDefault();

                      const movName = movie_name.value;
                      movGenre = genre.value;
                      movDate = date.value;
                      movLanguage = language.value;
                      movActors = actors.value;
                      movDirector = director.value;
                      movMusicDirector = music_director.value;
                      movSynopsis = synopsis.value;
                      // movTiming = timing.value;
                      movLinkFile = image_url.value;
                      movImageUrl = link_file.value;
                      movTheatreName = theatreName.value;
                      movMorningTiming = morningTiming.value;
                      movAfternoonTiming = afternoonTiming.value;
                      movEveningTiming = eveningTiming.value;
                      movNightTiming = nightTiming.value;

                      // Update movie deatils in localstorage
                      movie.movie_name = movName;
                      movie.genre = movGenre;
                      movie.date = movDate;
                      movie.language = movLanguage;
                      movie.actors = movActors;
                      movie.director = movDirector;
                      movie.music_director = movMusicDirector;
                      movie.synopsis = movSynopsis;
                      // movie.timing = movTiming;
                      movie.image_url = movLinkFile;
                      movie.link_file = movImageUrl;
                      movie.theatreName = movTheatreName;
                      movie.morningTiming = movMorningTiming;
                      movie.afternoonTiming = movAfternoonTiming;
                      movie.eveningTiming = movEveningTiming;
                      movie.nightTiming = movNightTiming;

                      localStorage.setItem("Movie_detail", JSON.stringify(Movie_detail));

                      alert("Updated movie details successfully!!âœ…");

                      document.querySelector("form").reset();
                      document.getElementById("edit").setAttribute("disabled", true);
                    });
  }
                });

                //delete page
                //  delete page
                document.getElementById("delete").addEventListener("click", (event) => {
                  event.preventDefault();

                  const uniqueId = unique_id.value;
                  const Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));
                  const movieIndex = Movie_detail.findIndex(
    (detail) => detail.uuid === uniqueId
                  );

                  if (movieIndex > -1) {
                    Movie_detail.splice(movieIndex, 1);
                    localStorage.setItem("Movie_detail", JSON.stringify(Movie_detail));
                    alert("Movie details deleted successfully");
                    document.querySelector("form").reset();
  }
                });
        </script>

    </body>

</html>