<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Trailer edit form</title>
        <link rel="stylesheet" href="../../assets/css/editmovieform.css">
    </head>

    <body>
      <div class="box">

        <h2>Edit Trailer Form</h2>
        <form class="form">

            <label>Enter UUID</label>
            <input type="text" id="uuid">
            <div class="btn1">
            <button type="submit" id="find_Trailer_detail">Find movie</button>
            </div>


            <label>Movie_name</label>
            <input type="text" id="master">

            <label>Released Date</label>
            <input type="text" id="u/a">
          
            <label>Image Url</label>
            <input type="text" id="masterimg">
      
            <label>Video Url</label>
            <input type="date" id="video1">

            <label>Movie Description</label>
            <input type="text" id="kishan">

            <label>Stars</label>
            <input type="text" id="stars">

          <div>
            <button type="submit" id="edit">Edit details</button>
            <button type="submit" id="delete">Delete Details</button>
          </div>

        </form>
    </div>

        <script>
                //get value from local storage
                const form = document.querySelector(".form");
                const unique_id = document.getElementById("uuid");

                const findTrailerDetails = document.getElementById("find_Trailer_detail");
                const movie_name = document.getElementById("Movie_name");
                const releaseddate = document.getElementById("u/a");
                const imageurl = document.getElementById("masterimg");
                const videourl = document.getElementById("video1");
                const moviedescription = document.getElementById("kishan");
                const stars = document.getElementById("Stars");

                findTrailerDetails.addEventListener("click", (event) => {
                  event.preventDefault();
                  const uniqueId = unique_id.value;
                  const Trailer_detail = JSON.parse(localStorage.getItem("Trailer_detail"));
                  console.log(Trailer_detail);
                  const movie = Trailer_detail.find((details) => details.uuid === uniqueId);
                  console.log(movie);

                  if (movie) {
                    movie_name.value = movie.movie_name;
                    releaseddate.value = movie.releaseddate;
                    imageurl.value = movie.imageurl;
                    videourl.value = movie.videourl;
                    moviedescription.value = movie.moviedescription;
                    stars.value = movie.stars;

                    document.getElementById("edit").addEventListener("click", (event) => {
                      event.preventDefault();

                      const movName = movie_name.value;
                      movReleasedDate = releaseddate.value;
                      movImageUrl = imageurl.value;
                      movVideoUrl = videourl.value;
                      movDescription = moviedescription.value;
                      movStars = stars.value;
                      // Update movie deatils in localstorage
                      movie.movie_name = movName;
                      movie.releaseddate = movReleasedDate;
                      movie.imageurl = movImageUrl;
                      movie.videourl = movVideoUrl;
                      movie.moviedescription = movDescription;
                      movie.stars = movStars;

                      localStorage.setItem("Trailer_detail", JSON.stringify(Trailer_detail));

                      alert("Updated trailer details successfully!!âœ…");

                      document.querySelector("form").reset();
                      document.getElementById("edit").setAttribute("disabled", true);
                    });
  }
                });

                //delete page
                //  delete page
                document.getElementById("delete").addEventListener("click", (event) => {
                  event.preventDefault();

                  const uniqueId = unique_id.value;
                  const Trailer_detail = JSON.parse(localStorage.getItem("Trailer_detail"));
                  const trailerIndex = Trailer_detail.findIndex(
    (detail) => detail.uuid === uniqueId
                  );

                  if (trailerIndex > -1) {
                    Trailer_detail.splice(trailerIndex, 1);
                    localStorage.setItem("Movie_detail", JSON.stringify(Trailer_detail));
                    alert("Trailer details deleted successfully");
                    document.querySelector("form").reset();
  }
                });
        </script>

    </body>

</html>