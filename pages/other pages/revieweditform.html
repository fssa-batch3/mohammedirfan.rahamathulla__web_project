<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
        <link rel="stylesheet" href="../../assets/css/revieweditform.css">
    </head>

    <body>
      <div class="box">

        <h2>Review Edit Form</h2>
        <form class="form">

            <label>Enter UUID</label>
            <input type="text" id="uuid">
            <div class="btn1">
                          <button type="submit" id="find_Review_detail">Find movie</button>
            </div>


            <label>Movieimg</label>
            <input type="text" id="Movie_name">

         <div class="genrelabel"><label>Title</label>
            <input type="text" id="title">
          </div>

          <div>
            <label>Language</label>
            <input type="text" id="Language">
          </div>

          <div>
            <label>Movie Description</label>
            <input type="text" id="movie_description">
          </div>

          <div>
            <label>Stars</label>
            <input type="text" id="stars">
          </div>

          <div>
            <label>Director</label>
            <input type="text" id="Director">
          </div>

          <div>
            <label>Music_Director</label>
            <input type="text" id="MusicDirector">
          </div>

          <label>Man_1img</label>
        <input type="url" id="man1img"><br>
        <label>Man_1text</label>
        <input type="text" id="man1text"><br>

        <label>Man_2img</label>
        <input type="url" id="man2img"><br>
        <label>Man_2text</label>
        <input type="text" id="man2text"><br>

        <label>Man_3img</label>
        <input type="url" id="man3img"><br>
        <label>Man_3text</label>
        <input type="text" id="man3text"><br>
 
          <div>
            <button type="submit" id="edit">Edit details</button>
            <button type="submit" id="delete">Delete Details</button>
          </div>

        </form>
    </div>

        <script>
                //get value from local storage
                const form = document.querySelector(".form");
                const unique_id = document.getElementById("uuid");

                // let Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));

                const findReviewDetails = document.getElementById("find_Review_detail");
                const movie_name = document.getElementById("Movie_name");
                const title = document.getElementById("title");
                const language = document.getElementById("Language");
                const moviedescription = document.getElementById("movie_description");
                const stars = document.getElementById("stars");
                const director = document.getElementById("Director");
                const musicdirector = document.getElementById("MusicDirector");
                const Man_1 = document.getElementById("man1img");
                const Man_1text = document.getElementById("man1text");
                const Man_2 = document.getElementById("man2img");
                const Man_2text = document.getElementById("man2text");
                const Man_3 = document.getElementById("man3img");
                const Man_3text = document.getElementById("man3text");
                const para_1 = document.getElementById("karkucon");
                const para_2 = document.getElementById("boobalancon");
                const para_3 = document.getElementById("deepikacon");
               
                findReviewDetails.addEventListener("click", (event) => {
                  event.preventDefault();
                  const uniqueId = unique_id.value;
                  const Review_detail = JSON.parse(localStorage.getItem("Review_detail"));
                  console.log(Review_detail);
                  const movie = Review_detail.find((details) => details.uuid === uniqueId);
                  console.log(movie);

                  if (movie) {
                    movie_name.value = movie.movie_name;
                    title.value = movie.title;
                    language.value = movie.language;
                    actors.value = movie.actors;
                    moviedescription.value = movie.moviedescription;
                    director.value = movie.director;
                    musicdirector.value = movie.musicdirector;
                    man1.value = movie.man1;
                    man2.value = movie.man2;
                    man3.value = movie.man3;
                    para1.value = movie.para1;
                    para2.value = movie.para2;
                    para3.value = movie.para_3;

        
                    document.getElementById("edit").addEventListener("click", (event) => {
                      event.preventDefault();

                      const movName = movie_name.value;
                      movTitle = title.value;
                      movLanguage = language.value;
                      movActors = actors.value;
                      movDescription = moviedescription.value;
                      movMusicDirector = musicdirector.value;
                      movDirector = director.value;
                      movMan1 =  man1.value;
                      movMan2  = man2.value;
                      movMan3  = man3.value;
                      movPara1 = para1.value;
                      movPara2 = para2.value;
                      movPara3 = para3.value;


                     
                      // Update movie deatils in localstorage
                      movie.movie_name = movName;
                      movie.genre = movTitle;
                      movie.language = movLanguage;
                      movie.actors = movActors;
                      movie.description = movDescription;
                      movie.director = movDirector;
                      movie.musicdirector = movMusicDirector;
                      movie.man1 = movMan1;
                      movie.man2 = movMan2;
                      movie.man3 = movMan3;
                      movie.para1 = movPara1;
                      movie.para2 = movPara2;
                      movie.para3 = movPara3;
                     
                      localStorage.setItem("Review_detail", JSON.stringify(Review_detail));

                      alert("Updated review details successfully!!âœ…");

                      document.querySelector("form").reset();
                      document.getElementById("edit").setAttribute("disabled", true);
                    });
  }
                });
                document.getElementById("delete").addEventListener("click", (event) => {
                  event.preventDefault();

                  const uniqueId = unique_id.value;
                  const Review_detail = JSON.parse(localStorage.getItem("Review_detail"));
                  const reviewIndex = Review_detail.findIndex(
                   (detail) => detail.uuid === uniqueId
                  );

                  if (reviewIndex > -1) {
                    Review_detail.splice(reviewIndex, 1);
                    localStorage.setItem("Review_detail", JSON.stringify(Review_detail));
                    alert("Review details deleted successfully");
                    document.querySelector("form").reset();
  }
                });
        </script>

    </body>

</html>