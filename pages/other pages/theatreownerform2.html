<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
</head>

<body>
        <form class="form">

                <label>Enter UUID</label>
                <input type="text" id="uuid">
                <button type="submit" id="find_Theatreowner_detail">Find movie</button>

                <label>Owner Email</label>
                <input type="email" id="Movie_name">

                <label>Password</label>
                <input type="password" id="Genre">

                <label>Confirm Password</label>
                <input type="password" id="Language">

                <label>Theatre Name</label>
                <input type="text" id="Dates">

                <label>Theatre Address</label>
                <input type="text" id="Actors">

                <label>Screen</label>
                <input type="text" id="Director">

                <button type="submit" id="edit">Edit details</button>
                <button type="submit" id="delete">Delete Details</button>

        </form>

        <script>
                //get value from local storage
                const form = document.querySelector('.form');
                const unique_id = document.getElementById("uuid");

                // let Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));

                const findTheatreOwnerDetails = document.getElementById("find_Theatreowner_detail");
                const movie_name = document.getElementById("Movie_name")
                const genre = document.getElementById("Genre")
                const date = document.getElementById("Dates")
                const language = document.getElementById("Language")
                const actors = document.getElementById("Actors")
                const director = document.getElementById("Director")

                findTheatreOwnerDetails.addEventListener("click", (event) => {
                        event.preventDefault()
                        const uniqueId = unique_id.value;
                        const TheatreDetail_owner = JSON.parse(localStorage.getItem('Theatreowner_detail'));
                        console.log(TheatreDetail_owner);
                        const movie = TheatreDetail_owner.find(details =>
                                details.uuid === uniqueId
                        );

                        if (movie) {
                                movie_name.value = movie.movie_name;
                                genre.value = movie.genre;
                                date.value = movie.dates;
                                language.value = movie.language;
                                actors.value = movie.actors;
                                director.value = movie.director;
                            
                                document.getElementById("edit").addEventListener("click", (event) => {
                                        event.preventDefault();

                                        let movName = movie_name.value;
                                        movGenre = genre.value;
                                        movDate = date.value;
                                        movLanguage = language.value;
                                        movActors = actors.value;
                                        movDirector = director.value;

                                        // Update movie deatils in localstorage
                                        movie.movie_name = movName;
                                        movie.genre = movGenre;
                                        movie.date = movDate;
                                        movie.language = movLanguage;
                                        movie.actors = movActors;
                                        movie.director = movDirector;

                                        localStorage.setItem('Theatreowner_detail', JSON.stringify(TheatreDetail_owner));

                                        alert("Updated movie details successfully!!âœ…")

                                        document.querySelector("form").reset();
                                        document.getElementById("edit").setAttribute("disabled", true);
                                }

                                );

                        }
                });

                //delete page
                //  delete page
                document.getElementById("delete").addEventListener("click", (event) => {
                        event.preventDefault();

                        const uniqueId = unique_id.value;
                        const TheatreDetail_owner = JSON.parse(localStorage.getItem('Theatreowner_detail'));
                        const movieIndex = TheatreDetail_owner.findIndex(detail =>
                                detail.uuid === uniqueId
                        );

                        if (movieIndex > -1) {
                                TheatreDetail_owner.splice(movieIndex, 1);
                                localStorage.setItem('Theatreowner_detail', JSON.stringify(TheatreDetail_owner));
                                alert("Movie details deleted successfully");
                                document.querySelector('form').reset();


                        }

                })

        </script>

</body>

</html>