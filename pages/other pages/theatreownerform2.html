<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
</head>

<body>
        <form class="form">

                <label>Enter UUID</label>
                <input type="text" id="uuid">
                <button type="submit" id="find_Theatreowner_detail">Find movie</button>

                <label>Owner Email</label>
                <input type="email" id="Email">

                <label>Password</label>
                <input type="password" id="Password">

                <label>Confirm Password</label>
                <input type="password" id="Confirm_Password">

                <label>Theatre Name</label>
                <input type="text" id="Theatre_Name">

                <label>Theatre Address</label>
                <input type="text" id="Theatre_Address">

                <label>Screen</label>
                <input type="text" id="Screen">

                <button type="submit" id="edit">Edit details</button>
                <button type="submit" id="delete">Delete Details</button>

        </form>

        <script>
                //get value from local storage
                const form = document.querySelector('.form');
                const unique_id = document.getElementById("uuid");

                // let Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));

                const findTheatreOwnerDetails = document.getElementById("find_Theatreowner_detail");
                const Email= document.getElementById("Email")
                const Password = document.getElementById("Password")
                const Confirm_Password= document.getElementById("Confirm_Password")
                const Theatre_Name = document.getElementById("Theatre_Name")
                const Theatre_Address = document.getElementById("Theatre_Address")
                const Screens = document.getElementById("Screen")

                findTheatreOwnerDetails.addEventListener("click", (event) => {
                        event.preventDefault()
                        const uniqueId = unique_id.value;
                        const TheatreDetail_owner = JSON.parse(localStorage.getItem('Theatreowner_detail'));
                        console.log(TheatreDetail_owner);
                        const movie = TheatreDetail_owner.find(details =>
                                details.uuid === uniqueId
                        );

                        if (movie) {
                                Email.value = movie.Email;
                                Password.value = movie.Password;
                                Confirm_Password.value = movie.Confirm_Password;
                                Theatre_Name.value = movie.Theatre_Name;
                                Theatre_Address.value = movie.Theatre_Address;
                                Screens.value = movie.Screens;
                            
                                document.getElementById("edit").addEventListener("click", (event) => {
                                        event.preventDefault();

                                        let movEmail = Email.value;
                                        movPassword = Password.value;
                                        movConfirmPassword = Confirm_Password.value;
                                        movTheatreName = Theatre_Name.value;
                                        movTheatreAddress = Theatre_Address.value;
                                        movScreens = Screens.value;

                                        // Update movie deatils in localstorage
                                        movie.Email = movEmail;
                                        movie.Password = movPassword;
                                        movie.Confirm_Password = movConfirmPassword;
                                        movie.Theatre_Name = movTheatreName;
                                        movie.Theatre_Address = movTheatreAddress;
                                        movie.Screens = movScreens;

                                        localStorage.setItem('Theatreowner_detail', JSON.stringify(TheatreDetail_owner));

                                        alert("Updated movie details successfully!!âœ…")

                                        document.querySelector("form").reset();
                                        document.getElementById("edit").setAttribute("disabled", true);
                                }

                                );

                        }
                });

                //delete page
                //  delete page
                document.getElementById("delete").addEventListener("click", (event) => {
                        event.preventDefault();

                        const uniqueId = unique_id.value;
                        const TheatreDetail_owner = JSON.parse(localStorage.getItem('Theatreowner_detail'));
                        const movieIndex = TheatreDetail_owner.findIndex(detail =>
                                detail.uuid === uniqueId
                        );

                        if (movieIndex > -1) {
                                TheatreDetail_owner.splice(movieIndex, 1);
                                localStorage.setItem('Theatreowner_detail', JSON.stringify(TheatreDetail_owner));
                                alert("Movie details deleted successfully");
                                document.querySelector('form').reset();


                        }

                })

        </script>

</body>

</html>