<!DOCTYPE html>

<head lan="eng">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="../../assets/css/log.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" ></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js" ></script>
</head>

<body>

    <div class="main">

        <h1>Lets start to book your tickets!</h1>

        <div class="input">
            <h2> USER SIGN UP</h2>

            <div class="email">
                <input required type="text" placeholder="Enter your name" required="email" id="name" pattern="[a-zA-Z]+" title="Enter alphabet without space" required="true">
                <label>NAME </label>
            </div>

            <div class="email">
                <input required type="number" placeholder="Enter your phone number" id="phone_number">
                <label>NUMBER</label>
            </div>

            <div class="email">
                <input required type="email" placeholder="Enter your email" id="email" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required="true">
                <label>EMAIL</label>
            </div>

            <div class="email">
                <input required type="password" placeholder="Enter your password" id="password"pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required="true">
                <label>PASSWORD</label>
            </div>
            <div class="email">
                <input required type="password" placeholder="Confirm your password" id="con_password"required="true">
                <label>CONFIRM </label>
            </div>

            <button type="submit">SUBMIT</button>

        </div>

            <a href="log.html">
 <h2>Already have a account</h2>
</a>
         
        </form>

        </div>

    </div>

    <script>
    const form=document.querySelector("form");
form.addEventListener("submit",e=>{
    e.preventDefault();
    submit();
})
        function submit() {

            const number = document.getElementById("number").value;
            const name = document.getElementById("name").value;
            const emailid = document.getElementById("emailid").value;
            const password = document.getElementById("password").value;
            const confirm_password = document.getElementById("confirm_password").value;

            let res;

            if (password != confirm_password) {
                alert("password did not match");
            } 
            
            else {
                res=1;

                const user_data = {
            "email": emailid,
             "password": password,
            "name": name,
             "number": number,
             "status":true, 
        }

            const users =JSON.parse( localStorage.getItem("users"))

            ? JSON.parse(localStorage.getItem("users"))          
            :  [];                              

            users.push(user_data) 

            localStorage.setItem("users", JSON.stringify(users))  

            if (res==1){
                
                swal({
                title: "Are you sure?",
                text: " Your log out your account !",
                icon: "warning",
                buttons: true,
                dangerMode: true,
            })
                .then((willDelete) => {
                    if (willDelete) {
                        swal("Your account as log in!", {
                            icon: "success",
                        });
                        window.location.href = "log.html"
                    } else {
                        swal("Your account is not log outed!");
                    }

                });
        

                

            }
                
            }

        };

       