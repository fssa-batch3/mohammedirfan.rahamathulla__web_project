<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Owner detail edit</title>
    </head>

    <body>
        <form class="form">

            <label>Enter UUID</label>
            <input type="text" id="uuid">
            <button type="submit" id="find_owner_detail">Find movie</button>

            <label>Movie_name</label>
            <input type="text" id="Movie_name">

            <label>Genre</label>
            <input type="text" id="Genre">

            <label>Language</label>
            <input type="text" id="Language">

            <label>Dates</label>
            <input type="date" id="Dates">

            <label>Actors</label>
            <input type="text" id="Actors">

            <label>Director</label>
            <input type="text" id="Director">

            <label>Music_Director</label>
            <input type="text" id="MusicDirector">

            <label>Synopsis</label>
            <input type="text" id="Synopsis">

            <label>Image url</label>
            <input type="url" id="image_url">

            <!-- <label for="">timing</label>
                <input type="time">

                <select name="" id="timing">
                <option value="">am</option>
                <option value="">pm</option>
                </select>

                <label for="">timing</label>
                <input type="time">

                <select name="" id="timing">
                <option value="">am</option>
                <option value="">pm</option>
                </select>

                <label for="">timing</label>
                <input type="time">

                <select name="" id="timing">
                <option value="">am</option>
                <option value="">pm</option>
                </select>

                <label for="">timing</label>
                <input type="time">

                <select name="" id="timing">
                <option value="">am</option>
                <option value="">pm</option>
                </select> -->

            <label>link file</label>
            <input type="text" id="link_file">

            <button type="submit" id="edit">Edit details</button>
            <button type="submit" id="delete">Delete Details</button>

        </form>

        <script>
                //get value from local storage
                const form = document.querySelector(".form");
                const unique_id = document.getElementById("uuid");

                // let Movie_detail = JSON.parse(localStorage.getItem("Movie_detail"));

                const findOwnerDetails = document.getElementById("find_owner_detail");
                const movie_name = document.getElementById("Movie_name");
                const genre = document.getElementById("Genre");
                const date = document.getElementById("Dates");
                const language = document.getElementById("Language");
                const actors = document.getElementById("Actors");
                const director = document.getElementById("Director");
                const music_director = document.getElementById("MusicDirector");
                const synopsis = document.getElementById("Synopsis");
                // const timing = document.getElementById("Timing")
                const image_url = document.getElementById("image_url");
                const link_file = document.getElementById("link_file");

                findOwnerDetails.addEventListener("click", (event) => {
                  event.preventDefault();
                  const uniqueId = unique_id.value;
                  const Owner_detail = JSON.parse(localStorage.getItem("Owner_detail"));
                  console.log(Owner_detail);
                  const movie = Owner_detail.find((details) => details.uuid === uniqueId);

                  if (movie) {
                    movie_name.value = movie.movie_name;
                    genre.value = movie.genre;
                    date.value = movie.dates;
                    language.value = movie.language;
                    actors.value = movie.actors;
                    director.value = movie.director;
                    music_director.value = movie.music_Director;
                    synopsis.value = movie.synopsis;
                    // timing.value = movie.timing;
                    image_url.value = movie.image_url;
                    link_file.value = movie.link_file;

                    document.getElementById("edit").addEventListener("click", (event) => {
                      event.preventDefault();

                      const movName = movie_name.value;
                      movGenre = genre.value;
                      movDate = date.value;
                      movLanguage = language.value;
                      movActors = actors.value;
                      movDirector = director.value;
                      movMusicDirector = music_director.value;
                      movSynopsis = synopsis.value;
                      // movTiming = timing.value;
                      movLinkFile = image_url.value;
                      movImageUrl = link_file.value;

      // Update movie deatils in localstorage
                      movie.movie_name = movName;
                      movie.genre = movGenre;
                      movie.date = movDate;
                      movie.language = movLanguage;
                      movie.actors = movActors;
                      movie.director = movDirector;
                      movie.music_director = movMusicDirector;
                      movie.synopsis = movSynopsis;
                      // movie.timing = movTiming;
                      movie.image_url = movLinkFile;
                      movie.link_file = movImageUrl;
                      localStorage.setItem("Owner_detail", JSON.stringify(Owner_detail));

                      alert("Updated owner details successfully!!âœ…");

                      document.querySelector("form").reset();
                      document.getElementById("edit").setAttribute("disabled", true);
                    });
                  }
                });

                //delete page
                //  delete page
                document.getElementById("delete").addEventListener("click", (event) => {
                  event.preventDefault();

                  const uniqueId = unique_id.value;
                  const Owner_detail = JSON.parse(localStorage.getItem("Owner_detail"));
                  const ownerIndex = Owner_detail.findIndex(
    (detail) => detail.uuid === uniqueId
                  );

                  if (ownerIndex > -1) {
                    Owner_detail.splice(ownerIndex, 1);
                    localStorage.setItem("Owner_detail", JSON.stringify(Owner_detail));
                    alert("Owner details deleted successfully");
                    document.querySelector("form").reset();
  }
                });
        </script>

    </body>

</html>